(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},51:function(e,t,c){},53:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(34),s=c.n(n),i=(c(51),c(4)),l=(c(23),c(52),c(87)),o=(c(53),c.p+"static/media/spotify-logo.a05ad32d.png"),r=c(1);function j(){var e="https://accounts.spotify.com/authorize?client_id=".concat("d464d95ff32b4e2aa6de17a36668212d","&response_type=token&redirect_uri=").concat("https://nhuse.github.io/potato-music-player/dashboard","&scope=streaming%20user-read-email%20user-read-private%20playlist-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state");return Object(r.jsx)("div",{className:"login-component",children:Object(r.jsxs)(l.a,{className:"d-flex flex-column justify-content-center align-items-center",style:{minHeight:"94vh"},children:[Object(r.jsx)("img",{className:"login-logo",src:o,alt:"spotify logo"}),Object(r.jsx)("a",{className:"btn btn-success btn-lg",href:e,children:"Login With Spotify"})]})})}var u=c(14),d=c(9),b=c.n(d);c(73);var p=function(e){var t=e.playlist,c=t.id,a=t.name,n=t.tracks,s=t.images,i=e.handlePlaylistClick,l="";return l=0===s.length?"https://www.pngall.com/wp-content/uploads/2016/04/Compact-Disk-Download-PNG.png":s[0].url,Object(r.jsx)("div",{className:"card",children:Object(r.jsxs)("div",{className:"playlist-info",onClick:function(){i(c)},children:[Object(r.jsx)("img",{src:l,className:"playlist-img"}),Object(r.jsx)("h5",{children:a}),Object(r.jsxs)("p",{children:[n.total," Songs"]})]})})};c(74);var h=function(e){var t=e.playlists,c=e.handlePlaylistClick;return Object(r.jsx)("div",{className:"playlist-flex-container",children:t.map((function(e){return Object(r.jsx)(p,{playlist:e,handlePlaylistClick:c},e.id)}))})};function m(e){var t=e.accessToken,c=e.genrePlaylists,n=e.handlePlaylistClick,s=Object(a.useState)([]),l=Object(i.a)(s,2),o=l[0],j=l[1];return Object(a.useEffect)((function(){t&&b.a.get("https://api.spotify.com/v1/browse/featured-playlists?limit=12",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return j(e.data.playlists.items)})).catch((function(e){return console.log(e)}))}),[t]),t?c.length>0?Object(r.jsx)(h,{handlePlaylistClick:n,playlists:c}):Object(r.jsx)(h,{playlists:o,handlePlaylistClick:n}):null}c(32);var f=c.p+"static/media/cd.2caffa81.png";function g(e){var t=e.accessToken,c=e.handleGenreChange,n=e.recentlyPlayedTrack,s=e.chooseTrack,l=Object(a.useState)(null),o=Object(i.a)(l,2),j=o[0],u=o[1],d=Object(a.useState)(""),p=Object(i.a)(d,2),h=p[0],m=p[1];return Object(a.useEffect)((function(){t&&(b.a.get("https://api.spotify.com/v1/browse/categories?limit=5",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return u(e)})).catch((function(e){return console.log(e)})),b.a.get("https://api.spotify.com/v1/me",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return m(e.data.images[0].url)})).catch((function(e){return console.log(e)})))}),[t]),j?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h3",{className:"genre-ul-title",children:"Genres"}),Object(r.jsxs)("ul",{className:"genre-ul",children:[Object(r.jsxs)("li",{className:"genre-li-container",id:"user-library",onClick:function(){return c("")},children:[Object(r.jsx)("img",{className:"genre-li-img",src:h}),Object(r.jsx)("span",{className:"genre-li-span",children:Object(r.jsx)("p",{children:"Your Library"})})]}),j.data.categories.items.map((function(e){return Object(r.jsxs)("li",{className:"genre-li-container",onClick:function(){return c(e.id)},children:[Object(r.jsx)("img",{className:"genre-li-img",src:e.icons[0].url}),Object(r.jsx)("span",{className:"genre-li-span",children:Object(r.jsx)("p",{children:e.name})})]},e.id)}))]}),Object(r.jsx)("h3",{children:"Recently Played"}),Object(r.jsx)("ul",{className:"recently-played-ul",children:n.map((function(e){return Object(r.jsxs)("li",{className:"recently-played-li-container",onClick:function(){s(e.track.uri,e)},children:[Object(r.jsx)("img",{src:0===e.track.album.images[0].length?f:e.track.album.images[0].url,className:"recent-img"}),Object(r.jsxs)("div",{className:"most-recent-info",children:[Object(r.jsx)("p",{className:"most-recent-name",children:e.track.name}),Object(r.jsx)("p",{className:"most-recent-artist-name",children:e.track.artists[0].name})]})]},e.track.id)}))})]}):null}var O=c(45);function x(e){var t=e.accessToken,c=e.trackUri,n=e.songURIs,s=e.offset,l=Object(a.useState)(!1),o=Object(i.a)(l,2),j=o[0],u=o[1];return Object(a.useEffect)((function(){console.log(c),console.log(s),u(!0)}),[c]),t?Object(r.jsx)(O.a,{token:t,showSaveIcon:!0,autoPlay:!0,play:j,initialVolume:.5,uris:n,offset:s,styles:{activeColor:"#fff",bgColor:"#333",color:"#fff",loaderColor:"#fff",sliderColor:"#1cb954",trackArtistColor:"#ccc",trackNameColor:"#fff"}}):null}c(33);function y(e){var t=e.song,c=e.chooseTrack,a=e.index,n=t.track,s="";return s=0==n.album.images.length?"https://www.pngall.com/wp-content/uploads/2016/04/Compact-Disk-Download-PNG.png":n.album.images[0].url,Object(r.jsxs)("li",{className:"song-li-container",onClick:function(){c(n.uri,t,a)},children:[Object(r.jsx)("div",{className:"album-img",children:Object(r.jsx)("img",{src:s,className:"album-cover"})}),Object(r.jsxs)("div",{className:"song-info",children:[Object(r.jsx)("p",{className:"song-name",children:n.name}),Object(r.jsx)("p",{className:"artist-name",children:n.artists[0].name})]}),Object(r.jsx)("div",{className:"album-name",children:Object(r.jsx)("p",{className:"album-name-p",children:n.album.name})}),Object(r.jsx)("div",{className:"time",children:Object(r.jsx)("p",{className:"time-p",children:function(e){var t=Math.floor(e/6e4),c=(e%6e4/1e3).toFixed(0);return 60==c?t+1+":00":t+":"+(c<10?"0":"")+c}(n.duration_ms)})})]})}function k(e){var t=e.songList,c=e.chooseTrack;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("ul",{className:"song-ul",children:t.map((function(e,t){return e.is_local?void 0:Object(r.jsx)(y,{song:e,index:t,chooseTrack:c},e.track.id)}))})})}var v=c(2);function N(e){var t=e.accessToken,c=Object(a.useState)([]),n=Object(i.a)(c,2),s=n[0],l=n[1],o=Object(a.useState)(null),j=Object(i.a)(o,2),d=j[0],p=j[1],h=Object(a.useState)([]),f=Object(i.a)(h,2),O=f[0],y=f[1],N=Object(a.useState)([]),C=Object(i.a)(N,2),T=C[0],w=C[1],S=Object(a.useState)(),P=Object(i.a)(S,2),A=P[0],z=P[1],B=Object(a.useState)([]),L=Object(i.a)(B,2),_=L[0],D=L[1],E=Object(a.useState)(0),U=Object(i.a)(E,2),G=U[0],I=U[1];function R(e,t,c){if(z(e),I(c),!0===function(e,t){var c;for(c=0;c<t.length;c++)if(t[c].track.id===e.track.id)return!0;return!1}(t,_)){var a=_.filter((function(e){return e.track.id!==t.track.id}));_.length>=5?D([t].concat(Object(u.a)(a.slice(0,5)))):D([t].concat(Object(u.a)(a)))}else _.length>=5?D([t].concat(Object(u.a)(_.slice(0,4)))):D([t].concat(Object(u.a)(_)))}return Object(a.useEffect)((function(){""===d?b.a.get("https://api.spotify.com/v1/me/playlists?limit=20",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){w([]),y(e.data.items)})).catch((function(e){return console.log(e)})):b.a.get("https://api.spotify.com/v1/browse/categories/".concat(d,"/playlists?limit=20"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){w([]),y(e.data.playlists.items)})).catch((function(e){return console.log(e)}))}),[d]),t?Object(r.jsxs)("div",{className:"dashboard",children:[Object(r.jsx)("aside",{className:"side-bar",children:Object(r.jsx)(g,{accessToken:t,handleGenreChange:function(e){p(e)},recentlyPlayedTrack:_,chooseTrack:R})}),Object(r.jsx)("div",{className:"playlist-song-container",children:0===T.length?Object(r.jsx)(m,{accessToken:t,genrePlaylists:O,handlePlaylistClick:function(e){b.a.get("https://api.spotify.com/v1/playlists/".concat(e,"/tracks?market=US"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){var t=e.data.items.filter((function(e){return!e.is_local}));console.log(t);var c=t.map((function(e){return e.track.uri}));console.log(c),w(t),l(c)})).catch((function(e){return console.log(e)}))}}):Object(r.jsx)(k,{songList:T,chooseTrack:R})}),Object(r.jsx)("div",{className:"player-container",children:A?Object(r.jsx)(x,{accessToken:t,trackUri:A,offset:G,songURIs:s}):null})]}):Object(r.jsx)(v.a,{to:"/login"})}var C=c(10),T=(c(84),c.p+"static/media/potato.35e51a62.png"),w={width:"100px",padding:"12px",margin:"0 6px 6px",background:"#00f000",textDecoration:"none",color:"rgba(255,255,255,.87)"};var S=function(e){var t=e.accessToken,c=e.setAccessToken,a=Object(v.g)();return Object(r.jsxs)("div",{className:"nav-bar",children:[Object(r.jsx)(C.b,{to:"/dashboard",exact:!0,style:w,activeStyle:{background:"#1db954"},children:"Dashboard"}),t?Object(r.jsx)(C.b,{onClick:function(){c(null),a.push("/login")},to:"/",style:w,activeStyle:{background:"#1db954"},children:"Logout"}):Object(r.jsx)(C.b,{to:"/login",exact:!0,style:w,activeStyle:{background:"#1db954"},children:"Login"}),Object(r.jsx)("img",{src:T,alt:"potato",id:"potato-img"})]})},P=new URLSearchParams(window.location.hash.substr(1)),A=P.get("access_token");var z=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){A&&n(A)}),[A]),Object(r.jsxs)("div",{children:[Object(r.jsx)(S,{accessToken:c,setAccessToken:n,params:P}),Object(r.jsxs)(v.d,{children:[Object(r.jsx)(v.b,{exact:!0,path:"/login",children:Object(r.jsx)(j,{})}),Object(r.jsx)(v.b,{path:"/dashboard",children:Object(r.jsx)(N,{accessToken:c})})]}),c?Object(r.jsx)(v.a,{to:"/dashboard"}):Object(r.jsx)(v.a,{to:"/login"})]})};s.a.render(Object(r.jsx)(C.a,{basename:"https://nhuse.github.io/potato-music-player/",children:Object(r.jsx)(v.b,{path:"/",component:z})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.21facb50.chunk.js.map